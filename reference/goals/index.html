<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> | Pensieve - Contextual Scratchpad for AI Agents</title>
    <meta name="description" content="A contextual scratchpad for AI agents to capture and recall working knowledge across sessions.">
    <link rel="stylesheet" href="/pensieve/css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="https://pradeeproark.github.io/pensieve/" class="logo">Pensieve</a>
            <ul class="nav-links">

                <li><a href="/pensieve/">What?</a></li>

                <li><a href="/pensieve/why/">Why?</a></li>

                <li><a href="/pensieve/getting-started/">Getting Started</a></li>

                <li><a href="/pensieve/demos/">Showcase</a></li>

                <li><a href="/pensieve/reference/">Docs</a></li>

            </ul>
        </div>
    </nav>
    <main class="container">

<article>
    <h1></h1>
    <h1 id="pensieve---memory-recording-tool-for-claude-code">Pensieve - Memory Recording Tool for Claude Code</h1>
<h2 id="project-goal">Project Goal</h2>
<p>Create a CLI tool that enables Claude Code agents to record and retrieve structured memory events across sessions. This persistent memory system helps maintain context, track decisions, and create continuity in long-running development projects.</p>
<h2 id="core-requirements">Core Requirements</h2>
<h3 id="1-template-system">1. Template System</h3>
<p><strong>Purpose</strong>: Define structured schemas for different types of memory events.</p>
<p><strong>Features</strong>:</p>
<ul>
<li>Agents can create custom templates</li>
<li>Templates define fields with specific types and constraints</li>
<li>Templates are versioned and immutable once in use</li>
<li>Templates can be exported/imported as JSON</li>
</ul>
<p><strong>Field Types</strong>:</p>
<ol>
<li><strong>boolean</strong>: True/False values for binary choices</li>
<li><strong>text</strong>: String values with optional max_length constraint</li>
<li><strong>url</strong>: Validated URLs with optional scheme restrictions (http, https, file, etc.)</li>
<li><strong>timestamp</strong>: ISO8601 datetime, can auto-fill current time</li>
<li><strong>file_reference</strong>: File paths with optional type validation (.py, .js, etc.)</li>
</ol>
<p><strong>Field Constraints</strong>:</p>
<ul>
<li>All fields can be marked as required or optional</li>
<li>Text fields: max_length (integer)</li>
<li>URL fields: allowed schemes (list of strings)</li>
<li>File reference fields: allowed file types (list of extensions)</li>
<li>Timestamp fields: auto_now (boolean) - auto-fill with current time</li>
</ul>
<p><strong>Example Templates</strong>:</p>
<ul>
<li><strong>architecture_decision</strong>: decision (text), rationale (text), alternatives_considered (text), date (timestamp)</li>
<li><strong>bug_fix</strong>: bug_description (text), root_cause (text), fix_location (file_reference), fixed_at (timestamp)</li>
<li><strong>pattern_discovered</strong>: pattern_name (text), use_case (text), code_location (file_reference), documentation_url (url)</li>
</ul>
<h3 id="2-journal-entry-system">2. Journal Entry System</h3>
<p><strong>Purpose</strong>: Record actual memory events using templates.</p>
<p><strong>Features</strong>:</p>
<ul>
<li>All entries must use a template</li>
<li>Entries are append-only (immutable)</li>
<li>Each entry records: agent name, timestamp, template used, field values</li>
<li>Entries can be searched and filtered</li>
<li>Entries can be exported as JSON</li>
</ul>
<p><strong>Metadata Captured</strong>:</p>
<ul>
<li>Unique entry ID (UUID)</li>
<li>Template ID and version</li>
<li>Agent identifier (who created the entry)</li>
<li>Creation timestamp (ISO8601)</li>
<li>All field values according to template schema</li>
</ul>
<h3 id="3-query-system">3. Query System</h3>
<p><strong>Purpose</strong>: Retrieve relevant memories based on context.</p>
<p><strong>Search Capabilities</strong>:</p>
<ul>
<li>By template type: Find all entries of a specific template</li>
<li>By date range: Find entries within a time period</li>
<li>By field content: Search within specific field values</li>
<li>By agent: Find all entries made by a specific agent</li>
<li>Combined filters: Mix multiple search criteria</li>
</ul>
<p><strong>Output Formats</strong>:</p>
<ul>
<li>Human-readable list view</li>
<li>Detailed single entry view</li>
<li>JSON export for programmatic access</li>
</ul>
<h3 id="4-migration-system">4. Migration System</h3>
<p><strong>Purpose</strong>: Allow the tool to evolve its schema over time.</p>
<p><strong>Features</strong>:</p>
<ul>
<li>Built-in migration framework</li>
<li>Version tracking in database</li>
<li>Automatic migration check on startup</li>
<li>Forward-only migrations (no rollback)</li>
<li>Migrations embedded in frozen executable</li>
<li>Migration integrity verification (checksums)</li>
</ul>
<p><strong>Migration Operations</strong>:</p>
<ul>
<li>Create tables and indexes</li>
<li>Add/modify columns</li>
<li>Transform existing data</li>
<li>Update schema version</li>
</ul>
<h3 id="5-distribution-model">5. Distribution Model</h3>
<p><strong>Purpose</strong>: Prevent agents from modifying the tool itself.</p>
<p><strong>Approach</strong>:</p>
<ul>
<li>Python source code during development</li>
<li>Frozen executable via PyInstaller for deployment</li>
<li>Agents interact only with the CLI interface</li>
<li>Database stored separately from executable</li>
<li>Migrations bundled within executable</li>
</ul>
<h2 id="use-cases">Use Cases</h2>
<h3 id="use-case-1-recording-architecture-decisions">Use Case 1: Recording Architecture Decisions</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Agent creates a template</span>
</span></span><span style="display:flex;"><span>pensieve template create
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Agent creates an entry</span>
</span></span><span style="display:flex;"><span>pensieve entry create --template architecture_decision
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Fills: decision, rationale, alternatives, date</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Later, another agent searches</span>
</span></span><span style="display:flex;"><span>pensieve entry search --template architecture_decision
</span></span></code></pre></div><h3 id="use-case-2-tracking-bug-fixes">Use Case 2: Tracking Bug Fixes</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Agent records bug fix</span>
</span></span><span style="display:flex;"><span>pensieve entry create --template bug_fix
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Fills: description, root cause, file location, timestamp</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Search for all bugs in specific file</span>
</span></span><span style="display:flex;"><span>pensieve entry search --template bug_fix --field fix_location<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;src/auth.py&#34;</span>
</span></span></code></pre></div><h3 id="use-case-3-documenting-patterns">Use Case 3: Documenting Patterns</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Agent discovers a pattern</span>
</span></span><span style="display:flex;"><span>pensieve entry create --template pattern_discovered
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Fills: pattern name, use case, code location, docs URL</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Export all patterns for documentation</span>
</span></span><span style="display:flex;"><span>pensieve entry export --template pattern_discovered --format json &gt; patterns.json
</span></span></code></pre></div><h2 id="integration-with-claude-code">Integration with Claude Code</h2>
<h3 id="superpower-skill">Superpower Skill</h3>
<p>A Claude Code skill will be created to guide agents on:</p>
<ul>
<li>When to create memories (significant decisions, bugs, patterns)</li>
<li>How to choose appropriate templates</li>
<li>How to search for relevant context before starting tasks</li>
<li>Best practices for memory capture</li>
</ul>
<h3 id="command-integration">Command Integration</h3>
<p>Claude Code commands can invoke pensieve to:</p>
<ul>
<li>Automatically record session summaries</li>
<li>Log significant events during workflows</li>
<li>Retrieve context at session start</li>
</ul>
<h2 id="technical-constraints">Technical Constraints</h2>
<ol>
<li><strong>Database</strong>: SQLite for zero-configuration persistence</li>
<li><strong>Immutability</strong>: Journal entries cannot be edited (append-only)</li>
<li><strong>Validation</strong>: All field values validated against template constraints</li>
<li><strong>Portability</strong>: Single database file, relocatable</li>
<li><strong>Performance</strong>: Fast queries even with thousands of entries (indexed)</li>
</ol>
<h2 id="success-criteria">Success Criteria</h2>
<ol>
<li>Agents can create custom templates with all 5 field types</li>
<li>Agents can record journal entries conforming to templates</li>
<li>Search returns relevant entries efficiently</li>
<li>Tool can self-update schema via migrations</li>
<li>Frozen executable prevents source modification</li>
<li>Complete test coverage for all operations</li>
<li>Clear documentation and usage examples</li>
</ol>

</article>

    </main>
    <footer class="container">
        <p>&copy; 2025 Cittamaya</p>
    </footer>
    <script src="/pensieve/js/chat-animation.js"></script>
</body>
</html>
